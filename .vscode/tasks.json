{
    // See https://go.microsoft.com/fwlink/?LinkId=733558
    // for the documentation about the tasks.json format
    "version":"2.0.0",
    "tasks":[
        {
            "label":"assemble",
            "type":"shell",
            "args":[
                "/I",
                "include",
                "/c",
                "src/${fileBasenameNoExtension}.asm"

            ],
            "command":"ml64.exe",
            "problemMatcher":{
                "owner":"nasm",
                "fileLocation":["relative","${workspaceFolder}"],
                "pattern":{
                    "regexp":"^(.*)\\((\\d*)\\)\\s+:?\\s+(error|warning)\\s+([A-z]+\\d+):\\s+(.*)$",
                    "file":1,
                    "line":2,
                    "severity":3,
                    "code":4,
                    "message":5,
                    "loop":true
                }
            }
        },
        {
            "label":"link",
            "type":"shell",
            "args":[
                "/SUBSYSTEM:WINDOWS",
                "/MACHINE:X64",
                "/ENTRY:entry_point",
                "/nologo",
                "/LARGEADDRESSAWARE",
                "${fileBasenameNoExtension}.obj"
        ],
        "command":"link.exe",
        "dependsOn":"assemble"
        },
        {
            "label":"execute",
            "type":"shell",
            "command":"${workspaceFolder}/${fileBasenameNoExtension}.exe",
            "group":{
                "kind":"build",
                "isDefault":true
            },
            "dependsOn":"link"
        }
    ]
}
